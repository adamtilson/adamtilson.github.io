<!DOCTYPE html>
<!-- Top Navigation modified from CodingNepal - https://www.codingnepalweb.com/mega-menu-and-dropdown-menu-html-css/ -->
<!-- Side navigation modified from Sticky, Smooth, Active Nav by Chris Coyier https://codepen.io/chriscoyier/pen/qyELzd -->
<!-- Collabsibles from W3Schools https://www.w3schools.com/howto/howto_js_collapsible.asp -->
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title> EYES SSE Activity </title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"/> 
  <link rel="stylesheet" href="/assets/css/style.css?v=">
  <link rel="icon" type="image/svg+xml" href="/assets/svg/at.svg">
  <!-- for mathjax support -->

</head>
<body>
  <nav id="site">
    <div class="wrapper">
      <div class="logo"><a href="#"><img
        src="/assets/svg/at.svg" alt="logo" height="35" width="35" /></a></div>
      <input type="radio" name="slider" id="menu-btn">
      <input type="radio" name="slider" id="close-btn">
      <ul class="nav-links">
        <label for="close-btn" class="btn close-btn"><i class="fas fa-times"></i></label>
        <!-- <li><a href="#">Blog</a></li>
        <li>
          <a href="#" class="desktop-item">CV ▾</a>
          <input type="checkbox" id="showDrop">
          <label for="showDrop" class="mobile-item">CV ▾</label>
          <ul class="drop-menu">
            <li><a href="#">Technical</a></li>
            <li><a href="#">Academic</a></li>
          </ul>
        </li> -->
        <li>
          <a href="#" class="desktop-item">Laboratory ▾</a>
          <input type="checkbox" id="showMega">
          <label for="showMega" class="mobile-item">Laboratory ▾</label>
          <div class="mega-box">
            <div class="content">


              <div class="row">
                <header>ENSE 271</header>
                <ul class="mega-links">
                  <li><a href="/labs/ense-271/">Schedule</a></li>
                  <li><a href="/labs/ense-271/lab-1">Lab 1</a></li>
                  <li><a href="/labs/ense-271/lab-2">Lab 2</a></li>
                  <li><a href="/labs/ense-271/lab-3">Lab 3</a></li>
                  <li><a href="/labs/ense-271/lab-4">Lab 4</a></li>
                  <li><a href="/labs/ense-271/lab-5">Lab 5</a></li>
                  <li><a href="/labs/ense-271/lab-6">Lab 6</a></li>
                  <!-- <li><a href="/labs/ense-271/lab-7">Lab 7</a></li> -->
                </ul>
              </div>

              <!-- <div class="row">
                <header>ENSE 374</header>
                <ul class="mega-links">
                  <li><a href="/labs/ense-374/">Schedule</a></li>
                  <li><a href="/labs/ense-374/lab-1">Lab 1</a></li>
                  <li><a href="/labs/ense-374/lab-2">Lab 2</a></li>
                  <li><a href="/labs/ense-374/lab-3">Lab 3</a></li>
                  <li><a href="/labs/ense-374/lab-4">Lab 4</a></li>
                  <li><a href="/labs/ense-374/lab-5">Lab 5</a></li>
                  <li><a href="/labs/ense-374/lab-6">Lab 6</a></li>
                  <li><a href="/labs/ense-374/lab-7">Lab 7</a></li>
                  <li><a href="/labs/ense-374/lab-8">Lab 8</a></li>
                  <li><a href="/labs/ense-374/lab-9">Lab 9</a></li>
                </ul>
              </div> -->

              <!-- <div class="row">
                <header>ENSE 411</header>
                <ul class="mega-links">
                  <li><a href="/labs/ense-411/schedule">Schedule</a></li>
                  <li><a href="/labs/ense-411/lab-0">Lab 0</a></li>
                  <li><a href="/labs/ense-411/lab-1">Lab 1</a></li>
                  <li><a href="/labs/ense-411/lab-2">Lab 2</a></li>
                  <li><a href="/labs/ense-411/lab-3">Lab 3</a></li>
                  <li><a href="/labs/ense-411/lab-4">Lab 4</a></li>
                  <li><a href="/labs/ense-411/lab-5">Lab 5</a></li>
                </ul>
              </div> -->

              <!-- <div class="row">
                <header>ENSE 472</header>
                <ul class="mega-links">
                  <li><a href="/labs/ense-472/">Schedule</a></li>
                  <li><a href="/labs/ense-472/lab-1">Lab 1</a></li>
                  <li><a href="/labs/ense-472/lab-2">Lab 2</a></li>
                  <li><a href="/labs/ense-472/lab-3">Lab 3</a></li>
                  <li><a href="/labs/ense-472/lab-4">Lab 4</a></li>
                  <li><a href="/labs/ense-472/lab-5">Lab 5</a></li>
                </ul>
              </div> -->
            </div>
          </div>
        </li>
        <li><a href="javascript:void(0);" id="darklink">🌞︎</a></li>
      </ul>
      <label for="menu-btn" class="btn menu-btn"><i class="fas fa-bars"></i></label>
    </div>
  </nav>
  
  <div class="body">
    <nav id="toc-nav">
      <ul id="toc">

      </ul>
    </nav>

    <main id="content" class="main-content" role="main">
        <p></p>
        <h1 id="eyes---software-systems-engineering---exercise">EYES - Software Systems Engineering - Exercise</h1>
<p>University of Regina - Engineering and Applied Science - Software Systems Engineering</p>

<p>Lab Instructor: <a href="mailto:Adam.Tilson@uregina.ca">Adam Tilson</a></p>

<hr />

<p><button class="expandall">Collapse All</button></p>
<section id="introsoftwaresystemsengineering"><button class="collapsible">Intro - Software Systems Engineering</button><div class="text-content"><div class="text-inner">

      <p>Software Systems Engineering is the branch of Engineering which is concerned with the development of Software Systems and their life-cycles. A Software System can be comprised of Software (e.g. programs, code), Hardware (e.g. computers, smart phones), and development artifacts (e.g. diagrams, documentation). While most students primarily focus on developing software, you will get exposure to math, natural sciences, computer science, and electronics. Essentially you will learn to solve engineering problems by developing software as the primary component (but not only component) of the solution. Example areas of study include networks, artificial intelligence and machine learning, embedded systems, desktop and web applications, and game development. Software Development Life-cycles include the requirements, planning, design, development, testing, deployment, maintenance and decommissioning of these systems.</p>

      <p>When most students think of Software Engineering they think of writing code. And while that is a key aspect of the role, there are other significant activities which exist outside of the code-writing scope. One of these activities is prototyping applications. Prototyping is an activity in which desginers and engineers create simple objects which represent a finished program, which could be a whiteboard sketch, a paper sketch, or a file produced using prototyping software, like Figma. In this activity we will investigate the prototyping Software Figma, then working together develop some new prototype apps.</p>

      <h3 id="about-me">About me</h3>

      <p><img src="res/adam-150-150.jpg" alt="" /></p>

      <p>My name is Adam Tilson, M.A.Sc., P.Eng., I am a Lab Instructor in Software Systems Engineering. My teaching portfolio currently consists of Software Management Lab, Networks Lab, Artificial Intelligence Lab, Machine Learning Lab, People Centered Design Lab, and Math Programming Lab. In addition to teaching in the lab, I mentor students in their capstone project, and I serve on a number of committees and organizations, internal and external.</p>

    </div></div></section>
<section id="agenda"><button class="collapsible">Agenda</button><div class="text-content"><div class="text-inner">

      <ul>
        <li>Creating Snake using MakeCode Arcade
          <ul>
            <li>Programming using Blocks and Python</li>
          </ul>
        </li>
        <li>Deploying to a hardware device</li>
      </ul>

    </div></div></section>
<section id="gettingstartedwithmakecodearcade"><button class="collapsible">Getting started with MakeCode Arcade</button><div class="text-content"><div class="text-inner">

      <p>MakeCode Arcade is a free Game Engine created by Microsoft which runs in your browser. It allows rapid development of 2D pixel-art style games by simplifying your ability to create sprites, move and position them, detect collisions, play sounds and animations, and much more. Users can code games using a visual block-style or text-based languages JavaScript and Python.</p>

      <p>The games created with this engine can be run in your browser and shared, or loaded to handheld devices. Overall this tool is a great introduction to game development and programming.</p>

      <p>Begin by browsing to the MakeCode Arcade Website:</p>

      <p><a href="https://arcade.makecode.com/">https://arcade.makecode.com/</a></p>

      <p>We are going to start a new project:</p>

      <p><img src="res/new-project.png" alt="" /></p>

      <p>Name your project as <code class="language-plaintext highlighter-rouge">snake</code>, click Create, and away you go!</p>

      <p><img src="res/first-project-settings.png" alt="" /></p>

      <p>Hint: If you plan to make several projects, it may be a good idea to use your Microsoft Account to enable cloud storage. Otherwise your projects are saved to your browser.</p>

    </div></div></section>
<section id="overview"><button class="collapsible">Overview</button><div class="text-content"><div class="text-inner">

      <p><img src="res/project-overview.png" alt="" /></p>

      <p>Some important parts to notice are:</p>
      <ul>
        <li>the simulator on the left, which can be operated using keys on the keyboard</li>
        <li>The language selection at the top, which defaults to Blocks</li>
        <li>The block selector (middle)</li>
        <li>The block editor (right)</li>
      </ul>

    </div></div></section>
<section id="makingacharacter"><button class="collapsible">Making a character</button><div class="text-content"><div class="text-inner">

      <p>To begin, our snake needs a head. Let’s make this:</p>

      <p><img src="res/new-picture.png" alt="" /></p>

      <p>For our sprite, we will make an Image</p>

      <p><img src="res/make-an-image.png" alt="" /></p>

      <p>You can select drawing tools and colors on the right side, and color in your snakes’s head. Don’t just follow my lead, use your own artistic skills.</p>

      <p><img src="res/snake-head.png" alt="" /></p>

      <p>Once you are happy, be sure to name your image as <code class="language-plaintext highlighter-rouge">face</code> and save it with Done. We’ll be able to look at this later.</p>

    </div></div></section>
<section id="addingourfaceasourplayer"><button class="collapsible">Adding our face as our player</button><div class="text-content"><div class="text-inner">

      <p>To add our face as our player, let’s start with the Block interface.</p>

      <p>Go to Sprites and grab the top Block. Then add it to the OnStart receptical.</p>

      <p>All of the lines of code in the <code class="language-plaintext highlighter-rouge">on start</code> block will run every time the game starts up!</p>

      <p><img src="res/adding-the-face.png" alt="" /></p>

      <p>This will result in your player being in your game:</p>

      <p><img src="res/player-in-game.png" alt="" /></p>

      <p>Let’s take a peak at what this looks like in Python code:</p>

      <p><img src="res/python.png" alt="" /></p>

      <p>Hint: You may need to use the dropdown to change from JavaScript to Python</p>

      <p>We can see a few things here, we have created a new variable called <code class="language-plaintext highlighter-rouge">mySprite</code>. This invoked a constructor of the sprites class called create, which looked in our assets folder for the face asset, and set the SpriteKind to player.</p>

      <p>Note: Switching back and forth between Blocks view and Python view can occasionally mess up your Blocks layout or your python formatting. We will go back and forth for a bit before committing to Python.</p>

    </div></div></section>
<section id="movingourplayer"><button class="collapsible">Moving our player</button><div class="text-content"><div class="text-inner">

      <p>Let’s hop back to the Blocks view, and start to create the code to move our player around:</p>

      <p><img src="res/pressing-a-button.png" alt="" /></p>

      <p>This creates an event, that occurs whenever a button is pressed:</p>

      <p><img src="res/change-a-property.png" alt="" /></p>

      <p>When the event occurs, we want to change a property of our sprite, namely the x-position. Configure it as follows:</p>

      <p><img src="res/change-position.png" alt="" /></p>

      <p>We want to move our player 16 pixels at a time, as this is the space of one tile.</p>

      <p>Hint: The game world in MakeCode arcade uses an XY coordinate system, like you saw in math, but the origin is at the top left, and with the y-axis flipped so that positive y-values move down:</p>

      <p><img src="res/coordinate-system.png" alt="" /></p>

      <p>This means that, to move left, we had to move in the negative-x direction. Based on this knowledge, can you figure out how to set the remaining 3 directions? Try to figure it out before you peek the solution ahead.</p>

      <p><img src="res/moving-in-four-directions.png" alt="" /></p>

      <p>Demo your game, you should be able to move your snake head all around the game.</p>

      <p>However, if you have actually played snake, you know that the snake does not move when you press buttons, but instead moves automatically at a set interval. In the next section we will modify our code to make the snake instead move automatically.</p>

    </div></div></section>
<section id="gameupdateloopautomovingsnake"><button class="collapsible">Game Update Loop - Auto moving snake</button><div class="text-content"><div class="text-inner">

      <p>Let’s talk about the idea of a game loop. This is a piece of code that runs at a set interval. MakeCode Arcade had a built in function for this, but we are going to create our own so that we can modify how fast the game runs. For this we will need a variable and a loop.</p>

      <p>Start by creating a new variable called delay. This will be set to 640 (ms) in the On Start function.</p>

      <p><img src="res/set-a-variable.png" alt="" /></p>

      <p>We want to rename the variable to delay</p>

      <p><img src="res/rename.png" alt="" /></p>

      <p>Set the variable name to <code class="language-plaintext highlighter-rouge">delay</code> and the value to <code class="language-plaintext highlighter-rouge">640</code>, and then sync it into the <code class="language-plaintext highlighter-rouge">on start</code> block</p>

      <p><img src="res/delay.png" alt="" /></p>

      <p>Now we will use this delay in a forever loop. We will grab the <code class="language-plaintext highlighter-rouge">forever</code> block from the Loops module, and place in the Pause function.</p>

      <p><img src="res/forever-and-pause.png" alt="" /></p>

      <p>Put them together, but rather than using a fixed value for the pause, we are going to use the delay variable we chose earlier:</p>

      <p><img src="res/grabbing-a-variable.png" alt="" /></p>

      <p>Let’s put it all together:</p>

      <p><img src="res/forever-pause-delay.png" alt="" /></p>

      <p>This block of code will run, and then pause for our delay time, about 2/3rds of a second. After that any code that follows it will run. Once that code is complete, it will loop again, beginning with the pause. This allows us to make a game loop with variable time, which will be useful for later on to speed up the game dynamically as the player gets better at it.</p>

      <p>Let’s try automatically moving our player down each update cycle by copying the “down” instruction from our controller and placing it after the delay.</p>

      <p>Hint: You can copy and paste a block by selecting it, then pressing ctrl+c then ctrl+v.</p>

      <p><img src="res/auto-down.png" alt="" /></p>

      <p>When you play now, you should see your player basically fall off the screen. We will handle that in the next section.</p>

    </div></div></section>
<section id="snakesteering"><button class="collapsible">Snake Steering</button><div class="text-content"><div class="text-inner">

      <p>We don’t want our player to only move down. We want it to move in a direction you chooose. This means it needs to</p>
      <ul>
        <li>know which direction it’s currently going</li>
        <li>try to change direction if you press a button
          <ul>
            <li>But it can only turn to one of the two sides. It can’t reverse, and going forward again wouldn’t change anything.</li>
          </ul>
        </li>
      </ul>

      <p>This is going to require two varaibles, and some conditional logic.</p>

      <p>Let’s start by setting up two new variables in our starting function:</p>

      <p>create variables called <code class="language-plaintext highlighter-rouge">current_direction</code> and <code class="language-plaintext highlighter-rouge">next_direction</code>.</p>

      <p>Hint: new variable blocks will default to variables you have already created. To make an new variable, explicitly click New variable…</p>

      <p><img src="res/new-variable.png" alt="" /></p>

      <p>We want to set these variables to a new type, <code class="language-plaintext highlighter-rouge">Text</code>. To do this we are going to need to grab some Text boxes from the Text function and drag them in.</p>

      <p><img src="res/text-directions.png" alt="" /></p>

      <p>This will allow you to type text in the box. Type <code class="language-plaintext highlighter-rouge">down</code> in each box, so that your new variables look as follows:</p>

      <p><img src="res/steering-variables.png" alt="" /></p>

      <p>Next let’s use conditional logic to move our snake based on the direction it is currently moving:</p>

      <p>We will need a condition block to check which direction it is moving, and go from there:</p>

      <p><img src="res/logic.png" alt="" /></p>

      <p>What this block does is checks if a condition is met, and if it is performs some code. Otherwise it runs some other code. We acually need 4 branches, one for each direction. You can do this by hitting the (+) on the bottom of the block.</p>

      <p><img src="res/four-branches.png" alt="" /></p>

      <p>What we want to do in these four branches is see which direction is set, and based on that, move our player. Let’s grab a text comparison block:</p>

      <p><img src="res/text-comparison-block.png" alt="" /></p>

      <p>Let’s put it into the top three branches of our comparator:</p>

      <p><img src="res/setting-up-comparisons.png" alt="" /></p>

      <p>On the left side of each of these, we want to use our <code class="language-plaintext highlighter-rouge">current_direction</code> variable. On the right side, we need to type in the words <code class="language-plaintext highlighter-rouge">left</code>, <code class="language-plaintext highlighter-rouge">right</code>, and <code class="language-plaintext highlighter-rouge">up</code>. We won’t need to do down, since by process of elimination, if we are not moving in any of these three directions, we must be moving down!</p>

      <p><img src="res/setting-up-comparisons-2.png" alt="" /></p>

      <p>Now we just need to move the code for moving from the controller to the conditions in the appropriate place:</p>

      <p><img src="res/moving-around-code.png" alt="" /></p>

      <p>Now we will move correctly based on the direction. However, our controllers are empty.</p>

      <p>Let’s fix this by using them to set the <code class="language-plaintext highlighter-rouge">next_direction</code> variable in each of the four directions. You should know how to do this by now. As a hint, don’t forget to grab the Text data type from the Text block in advanced:</p>

      <p><img src="res/setting-directions.png" alt="" /></p>

      <p>The reason we have two sets of directions, next_direction and current_direction, is because our snake can only go from some directions to others. It can’t go backwards, and it can’t go forwards. This means this is actually a rudimentary finite state machine. Engineering is everywhere, you cannot escape it!</p>

      <p><img src="res/fsm.png" alt="" /></p>

      <p>Let’s use conditional logic to protect against this. However, it is very slow to do this in Blocks. This is a perfect time to take a peak and see what Python is up to:</p>

      <p>Here is the structure of the code we have so far:</p>

      <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">on_forever</span><span class="p">():</span>
    <span class="n">pause</span><span class="p">(</span><span class="n">delay</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">current_direction</span> <span class="o">==</span> <span class="s">"left"</span><span class="p">:</span>
        <span class="n">mySprite</span><span class="p">.</span><span class="n">x</span> <span class="o">+=</span> <span class="o">-</span><span class="mi">16</span>
    <span class="k">elif</span> <span class="n">current_direction</span> <span class="o">==</span> <span class="s">"right"</span><span class="p">:</span>
        <span class="n">mySprite</span><span class="p">.</span><span class="n">x</span> <span class="o">+=</span> <span class="mi">16</span>
    <span class="k">elif</span> <span class="n">current_direction</span> <span class="o">==</span> <span class="s">"up"</span><span class="p">:</span>
        <span class="n">mySprite</span><span class="p">.</span><span class="n">y</span> <span class="o">+=</span> <span class="o">-</span><span class="mi">16</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">mySprite</span><span class="p">.</span><span class="n">y</span> <span class="o">+=</span> <span class="mi">16</span>
<span class="n">forever</span><span class="p">(</span><span class="n">on_forever</span><span class="p">)</span>
</code></pre></div>      </div>

      <p>We can see the way that condition blocks work in python.</p>
      <ul>
        <li>In the <code class="language-plaintext highlighter-rouge">if</code> line we check the condition
          <ul>
            <li>What happens if that is true is inside, indented in with four spaces</li>
            <li>A comparison is done with <code class="language-plaintext highlighter-rouge">==</code></li>
            <li>Finally, we end a line with a <code class="language-plaintext highlighter-rouge">:</code></li>
          </ul>
        </li>
        <li><code class="language-plaintext highlighter-rouge">elif</code> checks a second branch
          <ul>
            <li>With it’s contents inside</li>
          </ul>
        </li>
        <li>and <code class="language-plaintext highlighter-rouge">else</code> is what happens if no other conditions are true
          <ul>
            <li><code class="language-plaintext highlighter-rouge">else</code> doesn’t need a condition.</li>
          </ul>
        </li>
        <li>text, (known as Strings in python), have <code class="language-plaintext highlighter-rouge">"quotes"</code> around them.</li>
      </ul>

      <p>Let’s try to use the same structure to guard against our code.</p>
      <ul>
        <li>We want to set our current direction to <code class="language-plaintext highlighter-rouge">up</code> only if our next direction is <code class="language-plaintext highlighter-rouge">up</code> and our current direction is  <code class="language-plaintext highlighter-rouge">right</code> or <code class="language-plaintext highlighter-rouge">left</code></li>
        <li>we want to set our current direction to <code class="language-plaintext highlighter-rouge">right</code> only if our next direction is <code class="language-plaintext highlighter-rouge">right</code> and our current direction is <code class="language-plaintext highlighter-rouge">up</code> or <code class="language-plaintext highlighter-rouge">down</code></li>
        <li>And we have two other cases as well.</li>
        <li>See if you can figure out code to make this work.
          <ul>
            <li>Hint: The keyword “or” lets you logically combine two conditions and evaluate to true if either is true</li>
            <li>Hint: You can also nest if statements</li>
            <li>Final hint: in order to use the current_direction and next_direction variables from your code, add the following at the start of the on_forever function
              <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">global</span> <span class="n">next_direction</span>
<span class="k">global</span> <span class="n">current_direction</span>
</code></pre></div>              </div>
            </li>
          </ul>
        </li>
      </ul>

      <p>Here is one possible solution to make this work for turning up and down:</p>
      <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="k">if</span> <span class="n">current_direction</span> <span class="o">==</span> <span class="s">"left"</span> <span class="ow">or</span> <span class="n">current_direction</span> <span class="o">==</span> <span class="s">"right"</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">next_direction</span> <span class="o">==</span> <span class="s">"up"</span><span class="p">:</span>
            <span class="n">current_direction</span> <span class="o">=</span> <span class="s">"up"</span>
        <span class="k">if</span> <span class="n">next_direction</span> <span class="o">==</span> <span class="s">"down"</span><span class="p">:</span>
            <span class="n">current_direction</span> <span class="o">=</span> <span class="s">"down"</span>
</code></pre></div>      </div>
      <p>Try to make it work for “right” and “left” as well, before peaking the solution below:</p>
      <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="k">if</span> <span class="n">current_direction</span> <span class="o">==</span> <span class="s">"up"</span> <span class="ow">or</span> <span class="n">current_direction</span> <span class="o">==</span> <span class="s">"down"</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">next_direction</span> <span class="o">==</span> <span class="s">"left"</span><span class="p">:</span>
            <span class="n">current_direction</span> <span class="o">=</span> <span class="s">"left"</span>
        <span class="k">if</span> <span class="n">next_direction</span> <span class="o">==</span> <span class="s">"right"</span><span class="p">:</span>
            <span class="n">current_direction</span> <span class="o">=</span> <span class="s">"right"</span>
</code></pre></div>      </div>

      <p>Here is the complete block of code for the on_forever function. You can replace yours with this if you are having errors:</p>

      <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">on_forever</span><span class="p">():</span>
    <span class="k">global</span> <span class="n">current_direction</span>
    <span class="k">global</span> <span class="n">next_direction</span>
    <span class="n">pause</span><span class="p">(</span><span class="n">delay</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">current_direction</span> <span class="o">==</span> <span class="s">"left"</span><span class="p">:</span>
        <span class="n">mySprite</span><span class="p">.</span><span class="n">x</span> <span class="o">+=</span> <span class="o">-</span><span class="mi">16</span>
    <span class="k">elif</span> <span class="n">current_direction</span> <span class="o">==</span> <span class="s">"right"</span><span class="p">:</span>
        <span class="n">mySprite</span><span class="p">.</span><span class="n">x</span> <span class="o">+=</span> <span class="mi">16</span>
    <span class="k">elif</span> <span class="n">current_direction</span> <span class="o">==</span> <span class="s">"up"</span><span class="p">:</span>
        <span class="n">mySprite</span><span class="p">.</span><span class="n">y</span> <span class="o">+=</span> <span class="o">-</span><span class="mi">16</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">mySprite</span><span class="p">.</span><span class="n">y</span> <span class="o">+=</span> <span class="mi">16</span>
    <span class="k">if</span> <span class="n">current_direction</span> <span class="o">==</span> <span class="s">"left"</span> <span class="ow">or</span> <span class="n">current_direction</span> <span class="o">==</span> <span class="s">"right"</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">next_direction</span> <span class="o">==</span> <span class="s">"up"</span><span class="p">:</span>
            <span class="n">current_direction</span> <span class="o">=</span> <span class="s">"up"</span>
        <span class="k">if</span> <span class="n">next_direction</span> <span class="o">==</span> <span class="s">"down"</span><span class="p">:</span>
            <span class="n">current_direction</span> <span class="o">=</span> <span class="s">"down"</span>
    <span class="k">if</span> <span class="n">current_direction</span> <span class="o">==</span> <span class="s">"up"</span> <span class="ow">or</span> <span class="n">current_direction</span> <span class="o">==</span> <span class="s">"down"</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">next_direction</span> <span class="o">==</span> <span class="s">"left"</span><span class="p">:</span>
            <span class="n">current_direction</span> <span class="o">=</span> <span class="s">"left"</span>
        <span class="k">if</span> <span class="n">next_direction</span> <span class="o">==</span> <span class="s">"right"</span><span class="p">:</span>
            <span class="n">current_direction</span> <span class="o">=</span> <span class="s">"right"</span>
<span class="n">forever</span><span class="p">(</span><span class="n">on_forever</span><span class="p">)</span>
</code></pre></div>      </div>

      <p>With this all implemented, you can hop over to your game and give it a shot.</p>

    </div></div></section>
<section id="tidyingupourcodewithfunctions"><button class="collapsible">Tidying up our code with functions</button><div class="text-content"><div class="text-inner">

      <p>If we look back at our game loop blocks, we can see they are getting very very ugly!</p>

      <p><img src="res/ugly-blocks-need-refactoring.png" alt="" /></p>

      <p>This is a good opportunity to learn about functions. Functions are reuable blocks of code. You can define a function which groups together code, and then call that function so that you can use all that code quickly.</p>

      <p>Let’s break this code out into functions to make it easier to work with. Create two functions as blocks and name them <code class="language-plaintext highlighter-rouge">move</code> and <code class="language-plaintext highlighter-rouge">turn</code></p>

      <p><img src="res/make-a-function.png" alt="" /></p>

      <p>Name your function to move</p>

      <p><img src="res/a-function-called-move.png" alt="" /></p>

      <p>Drag the move code into the function:</p>

      <p><img src="res/move-code.png" alt="" /></p>

      <p>Then do a function call to invoke move from the forever-loop:</p>

      <p><img src="res/function-call-move.png" alt="" /></p>

      <p><img src="res/move-inline.png" alt="" /></p>

      <p>See if you can do the same with the second condition block, which we will call <code class="language-plaintext highlighter-rouge">turn</code>. When you are complete, here is what it should look like. The arrows indicate the order in which your program will flow:</p>

      <p><img src="res/function-flow.png" alt="" /></p>

      <p>Our snake is still just a head, and that’s sad. Let’s see if we can give it a body</p>

    </div></div></section>
<section id="givingyoursnakeabody"><button class="collapsible">Giving your snake a body</button><div class="text-content"><div class="text-inner">

      <p>To begin, let’s draw a body image for our snake.</p>

      <p>Assets -&gt; New -&gt; Image</p>

      <p>Here’s what I am doing for mine:</p>

      <p><img src="res/body.png" alt="" /></p>

      <p>Be sure to give it a name, <code class="language-plaintext highlighter-rouge">body</code>, and save it with done.</p>

      <p>We need our snake to be of a certain length. Let’s create a variable that our snakes length. Let’s see how to do this in python instead of Blocks. Find where your other variables are located, and add one for length:</p>

      <p><img src="res/length-variable.png" alt="" /></p>

      <p>That is much quicker than blocks!</p>

      <p>What does length=3 mean. It means your snake is going to have 3 body segments following it around.</p>

      <p>A lot of game programming is like performing a magic trick. It would be a lot of work to create a series of segments and have them follow us one after another. An easier thing to do would be to spawn a body segment where we are, and once we have moved 3 tiles, to despawn it. Once we become a length 4 snake, they will only get despawned after moving 4 tiles, etc.</p>

      <p>So we have a number of challenges to solve:</p>
      <ul>
        <li>How do we create new segments
          <ul>
            <li>We’ll need to do this right before we move</li>
          </ul>
        </li>
        <li>How do we keep track of all of these segments
          <ul>
            <li>We’ll use an array for this</li>
          </ul>
        </li>
        <li>How do we keep track of how old a segment is
          <ul>
            <li>We’ll use a data variable attached to the sprite for this, like one might use for HP in a game</li>
          </ul>
        </li>
        <li>How do we destory segments
          <ul>
            <li>Once their age is zero, we will have to despawn them.</li>
          </ul>
        </li>
      </ul>

      <p>This is how software engineering is done - analyze a big problem, break it down into little pieces, and solve them one by one. Let’s start by spawning in pieces after we move. We’ll create a new function for this called <code class="language-plaintext highlighter-rouge">grow</code>. Let’s do it right in python:</p>

      <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">grow</span><span class="p">():</span>
    <span class="n">tail_segment</span> <span class="o">=</span> <span class="n">sprites</span><span class="p">.</span><span class="n">create</span><span class="p">(</span><span class="n">assets</span><span class="p">.</span><span class="n">image</span><span class="p">(</span><span class="s">"""
        body
    """</span><span class="p">),</span> <span class="n">SpriteKind</span><span class="p">.</span><span class="n">enemy</span><span class="p">)</span>
    <span class="n">tail_segment</span><span class="p">.</span><span class="n">set_position</span><span class="p">(</span><span class="n">mySprite</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">mySprite</span><span class="p">.</span><span class="n">y</span><span class="p">),</span>
</code></pre></div>      </div>

      <p>Let’s also make sure we are calling this function right before we move. Find your on_forever function and add to it:</p>

      <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">on_forever</span><span class="p">():</span>
    <span class="n">pause</span><span class="p">(</span><span class="n">delay</span><span class="p">)</span>
    <span class="n">grow</span><span class="p">()</span>
    <span class="n">move</span><span class="p">()</span>
    <span class="n">turn</span><span class="p">()</span>
<span class="n">forever</span><span class="p">(</span><span class="n">on_forever</span><span class="p">)</span>
</code></pre></div>      </div>

      <p>When you test your game now, you should have an infinitely growing snake:</p>

      <p><img src="res/infinite-snake-unlocked.png" alt="" /></p>

      <p>We do have a problem though, and that is that we have a (theoretically) infinite number of sprites being added with no way to keep track of them all. It wouldn’t make sense to name every single one something unique (like <code class="language-plaintext highlighter-rouge">body_1</code>, <code class="language-plaintext highlighter-rouge">body_2</code>, <code class="language-plaintext highlighter-rouge">body_400</code>, etc.), so instead we will use an array, which is like a list of variables, in this case, sprites.</p>

      <p>First we create an empty array with the rest of our variable initializations:</p>

      <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">...</span>
<span class="n">current_direction</span> <span class="o">=</span> <span class="s">"down"</span>
<span class="n">next_direction</span> <span class="o">=</span> <span class="s">"down"</span>
<span class="n">length</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">tail_segments</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Sprite</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
<span class="p">...</span>
</code></pre></div>      </div>

      <p>and then whenever we create a new piece, we need to add it to the list:</p>

      <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">grow</span><span class="p">():</span>
    <span class="k">global</span> <span class="n">tail_segments</span>
    <span class="n">tail_segment</span> <span class="o">=</span> <span class="n">sprites</span><span class="p">.</span><span class="n">create</span><span class="p">(</span><span class="n">assets</span><span class="p">.</span><span class="n">image</span><span class="p">(</span><span class="s">"""
        body
    """</span><span class="p">),</span> <span class="n">SpriteKind</span><span class="p">.</span><span class="n">enemy</span><span class="p">)</span>
    <span class="n">tail_segment</span><span class="p">.</span><span class="n">set_position</span><span class="p">(</span><span class="n">mySprite</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">mySprite</span><span class="p">.</span><span class="n">y</span><span class="p">)</span>
    <span class="n">tail_segments</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">tail_segment</span><span class="p">)</span>
</code></pre></div>      </div>

      <p>Cool, now we won’t lose any of our segments, because they will all be in the list.</p>

      <p>The next thing we want our snake segments to age and dissapear over time. We will need an extension for this. Click on extensions:</p>

      <p><img src="res/extensions.png" alt="" /></p>

      <p>Type in <code class="language-plaintext highlighter-rouge">data</code>, and check out the extension called <code class="language-plaintext highlighter-rouge">arcade-sprite-data</code></p>

      <p><img src="res/arcade-sprite-data-install.png" alt="" /></p>

      <p>You will know that it is properly installed because there will now be a <code class="language-plaintext highlighter-rouge">Data</code> section under sprite:</p>

      <p><img src="res/data-in-sprite.png" alt="" /></p>

      <p>Let’s head back to python:</p>

      <p>Update your grow() function as follows:</p>

      <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">grow</span><span class="p">():</span>
    <span class="k">global</span> <span class="n">tail_segments</span>
    <span class="k">global</span> <span class="n">length</span>
    <span class="n">tail_segment</span> <span class="o">=</span> <span class="n">sprites</span><span class="p">.</span><span class="n">create</span><span class="p">(</span><span class="n">assets</span><span class="p">.</span><span class="n">image</span><span class="p">(</span><span class="s">"""
        body
    """</span><span class="p">),</span> <span class="n">SpriteKind</span><span class="p">.</span><span class="n">enemy</span><span class="p">)</span>
    <span class="n">tail_segment</span><span class="p">.</span><span class="n">set_position</span><span class="p">(</span><span class="n">mySprite</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">mySprite</span><span class="p">.</span><span class="n">y</span><span class="p">)</span>
    <span class="n">tail_segments</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">tail_segment</span><span class="p">)</span>
    <span class="n">sprites</span><span class="p">.</span><span class="n">set_data_number</span><span class="p">(</span><span class="n">tail_segment</span><span class="p">,</span> <span class="s">"ticks_remaining"</span><span class="p">,</span> <span class="n">length</span><span class="p">)</span>
</code></pre></div>      </div>

      <p>We have just create a new variable that will always live with that tail segment. It is called <code class="language-plaintext highlighter-rouge">ticks_remaining</code> and it is set to 3, which is our current length.</p>

      <p>The next thing we need to do is age our tail segments. We can actually do this at the starting of the function we are on right now:</p>

      <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">grow</span><span class="p">():</span>
    <span class="k">global</span> <span class="n">tail_segments</span>
    <span class="k">global</span> <span class="n">length</span>
    <span class="k">for</span> <span class="n">current_segment</span> <span class="ow">in</span> <span class="n">tail_segments</span><span class="p">:</span>
        <span class="n">sprites</span><span class="p">.</span><span class="n">change_data_number_by</span><span class="p">(</span><span class="n">current_segment</span><span class="p">,</span> <span class="s">"ticks_remaining"</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">tail_segment</span> <span class="o">=</span> <span class="n">sprites</span><span class="p">.</span><span class="n">create</span><span class="p">(</span><span class="n">assets</span><span class="p">.</span><span class="n">image</span><span class="p">(</span><span class="s">"""
        body
    """</span><span class="p">),</span> <span class="n">SpriteKind</span><span class="p">.</span><span class="n">enemy</span><span class="p">)</span>
    <span class="n">tail_segment</span><span class="p">.</span><span class="n">set_position</span><span class="p">(</span><span class="n">mySprite</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">mySprite</span><span class="p">.</span><span class="n">y</span><span class="p">)</span>
    <span class="n">tail_segments</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">tail_segment</span><span class="p">)</span>
    <span class="n">sprites</span><span class="p">.</span><span class="n">set_data_number</span><span class="p">(</span><span class="n">tail_segment</span><span class="p">,</span> <span class="s">"ticks_remaining"</span><span class="p">,</span> <span class="n">length</span><span class="p">)</span>
</code></pre></div>      </div>

      <p>In this code we are looping over the tail_segments, and for each we are decreasing the <code class="language-plaintext highlighter-rouge">ticks_remaining</code> by one.</p>

      <p>Finally, once the age reaches <code class="language-plaintext highlighter-rouge">ticks_remaining</code>, we want to destory this piece of the tail. Here is the final complete version of the grow() function:</p>

      <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">grow</span><span class="p">():</span>
    <span class="k">global</span> <span class="n">tail_segments</span>
    <span class="k">global</span> <span class="n">length</span>
    <span class="k">for</span> <span class="n">current_segment</span> <span class="ow">in</span> <span class="n">tail_segments</span><span class="p">:</span>
        <span class="n">sprites</span><span class="p">.</span><span class="n">change_data_number_by</span><span class="p">(</span><span class="n">current_segment</span><span class="p">,</span> <span class="s">"ticks_remaining"</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">sprites</span><span class="p">.</span><span class="n">read_data_number</span><span class="p">(</span><span class="n">current_segment</span><span class="p">,</span> <span class="s">"ticks_remaining"</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">sprites</span><span class="p">.</span><span class="n">destroy</span><span class="p">(</span><span class="n">current_segment</span><span class="p">)</span>
    <span class="n">tail_segment</span> <span class="o">=</span> <span class="n">sprites</span><span class="p">.</span><span class="n">create</span><span class="p">(</span><span class="n">assets</span><span class="p">.</span><span class="n">image</span><span class="p">(</span><span class="s">"""
        body
    """</span><span class="p">),</span> <span class="n">SpriteKind</span><span class="p">.</span><span class="n">enemy</span><span class="p">)</span>
    <span class="n">tail_segment</span><span class="p">.</span><span class="n">set_position</span><span class="p">(</span><span class="n">mySprite</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">mySprite</span><span class="p">.</span><span class="n">y</span><span class="p">)</span>
    <span class="n">tail_segments</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">tail_segment</span><span class="p">)</span>
    <span class="n">sprites</span><span class="p">.</span><span class="n">set_data_number</span><span class="p">(</span><span class="n">tail_segment</span><span class="p">,</span> <span class="s">"ticks_remaining"</span><span class="p">,</span> <span class="n">length</span><span class="p">)</span>
</code></pre></div>      </div>

      <p>However, currently there are no limits on how far your snake can move.</p>

      <p>Let’s use some conditional logic next to make sure the snake stays in bounds</p>

    </div></div></section>
<section id="losingifwegooutofbounds"><button class="collapsible">Losing if we go out of bounds</button><div class="text-content"><div class="text-inner">

      <p>To make our snake die if we go out of bounds, we will need to use some conditional logic to check it’s position, and if it is off the screen, give a game over.</p>

      <p>Let’s go ahead and put this in a new function called <code class="language-plaintext highlighter-rouge">check_oob</code>:</p>

      <p><img src="res/check-oob.png" alt="" /></p>

      <p>This is going to be more conditional logic, so let’s write this in python:</p>

      <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">check_oob</span><span class="p">():</span>
    <span class="k">if</span> <span class="n">mySprite</span><span class="p">.</span><span class="n">x</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">mySprite</span><span class="p">.</span><span class="n">y</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">mySprite</span><span class="p">.</span><span class="n">x</span> <span class="o">&gt;</span> <span class="n">scene</span><span class="p">.</span><span class="n">screen_width</span><span class="p">()</span> <span class="ow">or</span> <span class="n">mySprite</span><span class="p">.</span><span class="n">y</span> <span class="o">&gt;</span> <span class="n">scene</span><span class="p">.</span><span class="n">screen_height</span><span class="p">():</span>
        <span class="n">game</span><span class="p">.</span><span class="n">game_over</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
</code></pre></div>      </div>

      <p>However, we can also give a custom game over message. Let’s tell the user their score, based on their current length minus their starting legnth:</p>

      <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">check_oob</span><span class="p">():</span>
    <span class="k">global</span> <span class="n">length</span>
    <span class="k">if</span> <span class="n">mySprite</span><span class="p">.</span><span class="n">x</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">mySprite</span><span class="p">.</span><span class="n">y</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">mySprite</span><span class="p">.</span><span class="n">x</span> <span class="o">&gt;</span> <span class="n">scene</span><span class="p">.</span><span class="n">screen_width</span><span class="p">()</span> <span class="ow">or</span> <span class="n">mySprite</span><span class="p">.</span><span class="n">y</span> <span class="o">&gt;</span> <span class="n">scene</span><span class="p">.</span><span class="n">screen_height</span><span class="p">():</span>
        <span class="n">game</span><span class="p">.</span><span class="n">set_game_over_message</span><span class="p">(</span><span class="bp">False</span><span class="p">,</span> <span class="s">"Game Over. Score: "</span> <span class="o">+</span> <span class="n">convert_to_text</span><span class="p">(</span><span class="n">length</span><span class="o">-</span><span class="mi">3</span><span class="p">))</span>
        <span class="n">game</span><span class="p">.</span><span class="n">game_over</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
</code></pre></div>      </div>

      <p>Of course, not being able to get any score is no good, let’s work on that next</p>

    </div></div></section>
<section id="growingyoursnake"><button class="collapsible">Growing your snake</button><div class="text-content"><div class="text-inner">

      <p>Your snake grows by eating food that randomly spawns in on the map.</p>

      <p>Let’s go ahead and create an art asset for the food:</p>

      <p><img src="res/egg.png" alt="" /></p>

      <p>We need to spawn the egg randomly onto the field. But it’s very important we don’t spawn it on top of the snake, either the head or the body. This is going to require chance, but also some checks. Let’s create a new variable called <code class="language-plaintext highlighter-rouge">food_pickup</code> and a new function called <code class="language-plaintext highlighter-rouge">spawn_food</code>.</p>

      <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">length</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">tail_segments</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Sprite</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">food_pickup</span><span class="p">:</span> <span class="n">Sprite</span> <span class="o">=</span> <span class="bp">None</span>
</code></pre></div>      </div>

      <p>This code is a bit complicated. We are spawing in our food, moving it to a random location, checking if it overlaps with any part of the snake, and if it does, destroying it, creating a new one, and trying again.</p>

      <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">spawn_food</span><span class="p">():</span>
    <span class="k">global</span> <span class="n">food_pickup</span>
    <span class="k">global</span> <span class="n">tail_segments</span>
    <span class="n">food_pickup</span> <span class="o">=</span> <span class="n">sprites</span><span class="p">.</span><span class="n">create</span><span class="p">(</span><span class="n">assets</span><span class="p">.</span><span class="n">image</span><span class="p">(</span><span class="s">"""
        food
    """</span><span class="p">),</span> <span class="n">SpriteKind</span><span class="p">.</span><span class="n">food</span><span class="p">)</span>
    <span class="n">food_pickup</span><span class="p">.</span><span class="n">x</span> <span class="o">+=</span> <span class="n">randint</span><span class="p">(</span><span class="o">-</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span> <span class="o">*</span> <span class="mi">16</span>
    <span class="n">food_pickup</span><span class="p">.</span><span class="n">y</span> <span class="o">+=</span> <span class="n">randint</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="o">*</span> <span class="mi">16</span>
    <span class="n">overlaps</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="k">if</span> <span class="n">food_pickup</span><span class="p">.</span><span class="n">overlaps_with</span><span class="p">(</span><span class="n">mySprite</span><span class="p">):</span>
        <span class="n">overlaps</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="k">for</span> <span class="n">current_segment</span> <span class="ow">in</span> <span class="n">tail_segments</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">food_pickup</span><span class="p">.</span><span class="n">overlaps_with</span><span class="p">(</span><span class="n">current_segment</span><span class="p">):</span>
            <span class="n">overlaps</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="k">while</span> <span class="n">overlaps</span> <span class="o">==</span> <span class="bp">True</span><span class="p">:</span>
        <span class="n">overlaps</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="n">sprites</span><span class="p">.</span><span class="n">destroy</span><span class="p">(</span><span class="n">food_pickup</span><span class="p">)</span>
        <span class="n">food_pickup</span> <span class="o">=</span> <span class="n">sprites</span><span class="p">.</span><span class="n">create</span><span class="p">(</span><span class="n">assets</span><span class="p">.</span><span class="n">image</span><span class="p">(</span><span class="s">"""
                food
            """</span><span class="p">),</span> <span class="n">SpriteKind</span><span class="p">.</span><span class="n">food</span><span class="p">)</span>
        <span class="n">food_pickup</span><span class="p">.</span><span class="n">x</span> <span class="o">+=</span> <span class="n">randint</span><span class="p">(</span><span class="o">-</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span> <span class="o">*</span> <span class="mi">16</span>
        <span class="n">food_pickup</span><span class="p">.</span><span class="n">y</span> <span class="o">+=</span> <span class="n">randint</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="o">*</span> <span class="mi">16</span>
        <span class="k">if</span> <span class="n">food_pickup</span><span class="p">.</span><span class="n">overlaps_with</span><span class="p">(</span><span class="n">mySprite</span><span class="p">):</span>
                <span class="n">overlaps</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="k">for</span> <span class="n">current_tail_segment</span> <span class="ow">in</span> <span class="n">tail_segments</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">food_pickup</span><span class="p">.</span><span class="n">overlaps_with</span><span class="p">(</span><span class="n">current_tail_segment</span><span class="p">):</span>
                <span class="n">overlaps</span> <span class="o">=</span> <span class="bp">True</span>
</code></pre></div>      </div>

      <p>Don’t forget to call this function in your spawn_food function!</p>

      <p>Okay, time to eat some food and grow our snake!</p>

      <details>
<summary>Complete code so far</summary>
```
def on_up_pressed():
    global next_direction
    next_direction = "up"
controller.up.on_event(ControllerButtonEvent.PRESSED, on_up_pressed)

def check_oob():
    if mySprite.x &lt; 0 or mySprite.y &lt; 0 or mySprite.x &gt; scene.screen_width() or mySprite.y &gt; scene.screen_height():
        game.set_game_over_message(False, "Game Over. Score: " + convert_to_text(length - 3))
        game.game_over(False)

def on_left_pressed():
    global next_direction
    next_direction = "left"
controller.left.on_event(ControllerButtonEvent.PRESSED, on_left_pressed)

def spawn_food():
    global food_pickup, overlaps
    food_pickup = sprites.create(assets.image("""
        food
    """), SpriteKind.food)
    food_pickup.x += randint(-4, 4) * 16
    food_pickup.y += randint(-3, 3) * 16
    if food_pickup.overlaps_with(mySprite):
        overlaps = True
    for current_segment2 in tail_segments:
        if food_pickup.overlaps_with(current_segment2):
            overlaps = True
    while overlaps == True:
        overlaps = False
        sprites.destroy(food_pickup)
        food_pickup = sprites.create(assets.image("""
            food
        """), SpriteKind.food)
        food_pickup.x += randint(-4, 4) * 16
        food_pickup.y += randint(-3, 3) * 16
        if food_pickup.overlaps_with(mySprite):
            overlaps = True
        for current_tail_segment in tail_segments:
            if food_pickup.overlaps_with(current_tail_segment):
                overlaps = True

def on_right_pressed():
    global next_direction
    next_direction = "right"
controller.right.on_event(ControllerButtonEvent.PRESSED, on_right_pressed)

def grow():
    global tail_segment
    for current_segment in tail_segments:
        sprites.change_data_number_by(current_segment, "ticks_remaining", -1)
        if sprites.read_data_number(current_segment, "ticks_remaining") == 0:
            sprites.destroy(current_segment)
    tail_segment = sprites.create(assets.image("""
        body
    """), SpriteKind.enemy)
    tail_segment.set_position(mySprite.x, mySprite.y)
    tail_segments.append(tail_segment)
    sprites.set_data_number(tail_segment, "ticks_remaining", length)
def turn():
    global current_direction
    if current_direction == "left" or current_direction == "right":
        if next_direction == "up":
            current_direction = "up"
        if next_direction == "down":
            current_direction = "down"
    if current_direction == "up" or current_direction == "down":
        if next_direction == "left":
            current_direction = "left"
        if next_direction == "right":
            current_direction = "right"

def on_down_pressed():
    global next_direction
    next_direction = "down"
controller.down.on_event(ControllerButtonEvent.PRESSED, on_down_pressed)

def move():
    if current_direction == "left":
        mySprite.x += -16
    elif current_direction == "right":
        mySprite.x += 16
    elif current_direction == "up":
        mySprite.y += -16
    else:
        mySprite.y += 16
tail_segment: Sprite = None
tail_segments: List[Sprite] = []
overlaps = False
food_pickup: Sprite = None
length = 0
next_direction = ""
current_direction = ""
mySprite: Sprite = None
mySprite = sprites.create(assets.image("""
    face
"""), SpriteKind.player)
delay = 640
current_direction = "down"
next_direction = "down"
length = 3
spawn_food()

def on_forever():
    pause(delay)
    grow()
    move()
    turn()
    check_oob()
forever(on_forever)
```
</details>

    </div></div></section>
<section id="eatingfood"><button class="collapsible">Eating food</button><div class="text-content"><div class="text-inner">

      <p>For our snake to grow it needs to be able to eat the food. So we need to check</p>
    </div></div></section>

    </main>

  </div>
  <footer>
    2022 Adam Tilson.
    <a href="https://creativecommons.org/licenses/by-nc-sa/2.0/"
      >CC-BY-NC-SA</a
    >
  </footer>
  <button onclick="topFunction()" id="topButton" title="Go to top">▲ Top</button> 
  <script src="/assets/js/script.js"></script>

</body>
</html>
